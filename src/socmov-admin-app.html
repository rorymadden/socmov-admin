<html><head><link rel="import" href="../bower_components/neon-animation/web-animations.html"><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html"><link rel="import" href="../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html"><link rel="import" href="../bower_components/app-layout/app-header/app-header.html"><link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html"><link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html"><link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html"><link rel="import" href="../bower_components/app-route/app-location.html"><link rel="import" href="../bower_components/app-route/app-route.html"><link rel="import" href="../bower_components/iron-pages/iron-pages.html"><link rel="import" href="../bower_components/iron-selector/iron-selector.html"><link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html"><link rel="import" href="../bower_components/paper-item/paper-item.html"><link rel="import" href="../bower_components/paper-listbox/paper-listbox.html"><link rel="import" href="../bower_components/polymerfire/firebase-auth.html"><link rel="import" href="../bower_components/polymerfire/firebase-app.html"><link rel="import" href="./components/socmov-admin-login.html"><link rel="import" href="./socmov-admin-icons.html"></head><body><dom-module id="socmov-admin-app"><template><style>:host{--app-primary-color:#4285f4;--app-secondary-color:black;display:block;}app-header{color:#fff;background-color:var(--app-primary-color);}.drawer-list{margin:0 20px;}.drawer-list a{display:block;padding:0 16px;text-decoration:none;color:var(--app-secondary-color);line-height:40px;}.drawer-list a.iron-selected{color:black;font-weight:bold;}.iron-selector[hidden]{display:none;}app-header{@apply (--layout-horizontal);@apply (--layout-center);background-color:var(--paper-purple-500);color:var(--paper-purple-50);padding:6px 8px;--paper-icon-button-disabled:{color:var(--paper-purple-50);};}app-header h1{font-size:14px;flex-grow:1;margin:9px 0;}paper-icon-button{--paper-icon-button-ink-color:white;}iron-icon{margin-right:0.5em;}iron-icon[hidden]{display:none;}iron-icon, paper-icon-button{margin-right:1.5em;}iron-icon:first-child{margin-left:1em;}paper-dropdown-menu{padding-right:20px;--paper-input-container:{color:#999;};--paper-input-container-input:{color:white;};--paper-input-container-label:{color:white;};}iron-pages{height:100%;}socmov-admin-sponsors, 
      socmov-admin-speakers, 
      socmov-admin-sessions, 
      socmov-admin-agendas, 
      socmov-admin-agenda-sessions{height:95%;}</style><firebase-auth id="auth" app-name="socmov" provider="google" signed-in="{{signedIn}}" user="{{user}}"></firebase-auth><firebase-query id="conferenceQuery" app-name="socmov" path="/conferenceDetails" data="{{conferenceList}}"></firebase-query><app-location route="{{route}}"></app-location><app-route route="{{route}}" pattern="/:page" data="{{routeData}}" tail="{{subroute}}"></app-route><app-drawer-layout fullbleed="" force-narrow=""><app-drawer id="drawer" slot="drawer"><app-toolbar>Menu</app-toolbar><iron-selector selected="[[page]]" attr-for-selected="name" class="drawer-list" role="navigation" hidden$="[[!signedIn]]"><a name="speakers" href="/speakers">Speakers</a> <a name="sponsors" href="/sponsors">Sponsors</a> <a name="sessions" href="/sessions">Sessions</a> <a name="agendas" href="/agendas">Agendas</a> <a name="attendees" href="/attendees">Attendees</a> <a name="media" href="/media">Media</a> <a name="details" href="/details">Details</a></iron-selector></app-drawer><app-header-layout has-scrolling-region=""><app-header slot="header" condenses="" reveals="" effects="waterfall"><app-toolbar><paper-icon-button icon="socmov-admin-icons:menu" drawer-toggle=""></paper-icon-button><h1>SocMov Admin</h1><paper-dropdown-menu label="Conference"><paper-listbox slot="dropdown-content" selected="1"><template is="dom-repeat" items="{{sortedConferenceList}}" selected="0"><paper-item conference="[[item]]">[[item.name]] - [[item.location]] - [[item.year]]</paper-item></template></paper-listbox></paper-dropdown-menu><iron-icon icon="cloud" hidden$="[[!online]]"></iron-icon><iron-icon icon="cloud-off" hidden$="[[online]]"></iron-icon><paper-icon-button icon="[[computeLockIcon(signedIn)]]" disabled="[[!signedIn]]" on-tap="lock"></paper-icon-button></app-toolbar></app-header><socmov-admin-login on-sign-in="signIn" signed-in="[[signedIn]]" disabled="[[!online]]"></socmov-admin-login><iron-pages hidden$="[[!signedIn]]" selected="[[page]]" attr-for-selected="name" fallback-selection="view404" role="main"><socmov-admin-speakers name="speakers" conf="{{confDb}}"></socmov-admin-speakers><socmov-admin-agendas name="agendas" conf="{{confDb}}"></socmov-admin-agendas><socmov-admin-agenda-sessions name="agenda-sessions" agendakey="{{subroute}}" conf="{{confDb}}"></socmov-admin-agenda-sessions><socmov-admin-sponsors name="sponsors" conf="{{confDb}}"></socmov-admin-sponsors><socmov-admin-sessions name="sessions" conf="{{confDb}}"></socmov-admin-sessions><socmov-admin-attendees name="attendees" conf="{{confDb}}"></socmov-admin-attendees><socmov-admin-media name="media" conf="{{confDb}}"></socmov-admin-media><socmov-admin-details name="details" conf="{{confDb}}"></socmov-admin-details><socmov-admin-view404 name="view404"></socmov-admin-view404></iron-pages></app-header-layout></app-drawer-layout></template><script>class SocmovAdminApp extends Polymer.mixinBehaviors([Polymer.AppNetworkStatusBehavior],Polymer.Element){static get is(){return'socmov-admin-app'}static get properties(){return{page:{type:String,reflectToAttribute:!0,observer:'_pageChanged'},signedIn:{type:Boolean,notify:!0,value:!1},user:{type:Object,observer:'_validateDomain'},conferenceList:Array,sortedConferenceList:Array,conf:{type:Object}}}static get observers(){return['_sortConferences(conferenceList.*)','_routePageChanged(routeData.page)']}ready(){super.ready(),this.addEventListener('iron-select',function(c){this._setConference(c)}.bind(this))}_validateDomain(c){c&&-1===c.email.indexOf('@sociallymotivated.com')&&(console.log('bad user'),this.signOut())}_setConference(c){c.detail.item.conference&&(this.conf=c.detail.item.conference,this.confDb='/conferences/'+this.conf.name+'/locations/'+this.conf.location+'/'+this.conf.year)}_sortConferences(){this.sortedConferenceList=this.conferenceList.filter(function(c){return c.active}),this.sortedConferenceList.sort(function(c,d){return c.startDate>d.startDate?1:c.startDate<d.startDate?-1:0})}_routePageChanged(c){void 0===c||(this.page=c||'speakers',this.$.drawer.close())}_pageChanged(c){var d=this.resolveUrl('socmov-admin-'+c+'.html');Polymer.importHref(d,null,this._showPage404.bind(this),!0)}_showPage404(){this.page='view404'}signIn(){this.$.auth.signInWithPopup()}signOut(){this.$.auth&&this.$.auth.signOut()}computeLockIcon(c){return c?'lock-open':'lock'}lock(){this.dispatchEvent(new CustomEvent('sign-out',{bubbles:!0}))}}window.customElements.define(SocmovAdminApp.is,SocmovAdminApp);</script></dom-module></body></html>