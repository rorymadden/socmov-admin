<html><head><link rel="import" href="../polymer/polymer-element.html"><link rel="import" href="../polymer/lib/elements/dom-repeat.html"><link rel="import" href="../polymer/lib/mixins/gesture-event-listeners.html"><link rel="import" href="vaadin-date-picker-helper.html"><link rel="import" href="../vaadin-themable-mixin/vaadin-themable-mixin.html"><link rel="import" href="vaadin-date-picker-styles.html"></head><body><dom-module id="vaadin-month-calendar"><template><style>:host{display:block;}[part="weekdays"],
      #days{display:flex;flex-wrap:wrap;flex-grow:1;}#days-container,
      #weekdays-container{display:flex;}[part="week-numbers"]{display:flex;flex-direction:column;justify-content:space-between;flex-shrink:0;}[part="week-numbers"][hidden]{display:none;}[part="weekday"],
      [part="date"]{width:14.285714286%;}[part="weekday"]:empty,
      [part="week-numbers"]{width:12.5%;flex-shrink:0;}</style><div part="month-header" role="heading">[[_getTitle(month, i18n.monthNames)]]</div><div id="monthGrid" on-tap="_handleTap" on-touchend="_preventDefault" on-touchstart="_onMonthGridTouchStart"><div id="weekdays-container"><div hidden="[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]" part="weekday"></div><div part="weekdays"><template is="dom-repeat" items="[[_getWeekDayNames(i18n.weekdays, i18n.weekdaysShort, showWeekNumbers, i18n.firstDayOfWeek)]]"><div part="weekday" role="heading" aria-label$="[[item.weekDay]]">[[item.weekDayShort]]</div></template></div></div><div id="days-container"><div part="week-numbers" hidden="[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]"><template is="dom-repeat" items="[[_getWeekNumbers(_days)]]"><div part="week-number" role="heading" aria-label$="[[i18n.week]] [[item]]">[[item]]</div></template></div><div id="days"><template is="dom-repeat" items="[[_days]]"><div part="date" today$="[[_isToday(item)]]" selected$="[[_dateEquals(item, selectedDate)]]" focused$="[[_dateEquals(item, focusedDate)]]" date="[[item]]" disabled$="[[!_dateAllowed(item, minDate, maxDate)]]" role$="[[_getRole(item)]]" aria-label$="[[_getAriaLabel(item)]]" aria-disabled$="[[_getAriaDisabled(item, minDate, maxDate)]]">[[_getDate(item)]]</div></template></div></div></div></template><script>{class a extends Vaadin.ThemableMixin(Polymer.GestureEventListeners(Polymer.Element)){static get is(){return'vaadin-month-calendar'}static get properties(){return{month:{type:Date,value:new Date},selectedDate:{type:Date,notify:!0},focusedDate:Date,showWeekNumbers:{type:Boolean,value:!1},i18n:{type:Object},ignoreTaps:Boolean,_notTapping:Boolean,minDate:{type:Date,value:null},maxDate:{type:Date,value:null},_days:{type:Array,computed:'_getDays(month, i18n.firstDayOfWeek, minDate, maxDate)'},disabled:{type:Boolean,reflectToAttribute:!0,computed:'_isDisabled(month, minDate, maxDate)'}}}static get observers(){return['_showWeekNumbersChanged(showWeekNumbers, i18n.firstDayOfWeek)']}_dateEquals(b,c){return Vaadin.DatePickerHelper._dateEquals(b,c)}_dateAllowed(b,c,f){return Vaadin.DatePickerHelper._dateAllowed(b,c,f)}_isDisabled(b,c,f){var g=new Date(0,0);g.setFullYear(b.getFullYear()),g.setMonth(b.getMonth()),g.setDate(1);var h=new Date(0,0);return h.setFullYear(b.getFullYear()),h.setMonth(b.getMonth()+1),h.setDate(-1),!this._dateAllowed(g,c,f)&&!this._dateAllowed(h,c,f)}_getTitle(b,c){return void 0===b||void 0===c?void 0:this.i18n.formatTitle(c[b.getMonth()],b.getFullYear())}_onMonthGridTouchStart(){this._notTapping=!1,setTimeout(()=>this._notTapping=!0,300)}_dateAdd(b,c){b.setDate(b.getDate()+c)}_applyFirstDayOfWeek(b,c){return void 0===b||void 0===c?void 0:b.slice(c).concat(b.slice(0,c))}_getWeekDayNames(b,c,f,g){if(void 0!==b&&void 0!==c&&void 0!==f&&void 0!==g)return b=this._applyFirstDayOfWeek(b,g),c=this._applyFirstDayOfWeek(c,g),b=b.map((h,i)=>{return{weekDay:h,weekDayShort:c[i]}}),b}_getDate(b){return b?b.getDate():''}_showWeekNumbersChanged(b,c){b&&1===c?this.setAttribute('week-numbers',''):this.removeAttribute('week-numbers')}_showWeekSeparator(b,c){return b&&1===c}_isToday(b){return this._dateEquals(new Date,b)}_getDays(b,c){if(void 0!==b&&void 0!==c){var f=new Date(0,0);for(f.setFullYear(b.getFullYear()),f.setMonth(b.getMonth()),f.setDate(1);f.getDay()!==c;)this._dateAdd(f,-1);for(var g=[],h=f.getMonth(),i=b.getMonth();f.getMonth()===i||f.getMonth()===h;)g.push(f.getMonth()===i?new Date(f.getTime()):null),this._dateAdd(f,1);return g}}_getWeekNumber(b,c){if(void 0!==b&&void 0!==c)return b||(b=c.reduce((f,g)=>{return!f&&g?g:f})),Vaadin.DatePickerHelper._getISOWeekNumber(b)}_getWeekNumbers(b){return b.map(c=>this._getWeekNumber(c,b)).filter((c,f,g)=>g.indexOf(c)===f)}_handleTap(b){this.ignoreTaps||this._notTapping||!b.target.date||b.target.hasAttribute('disabled')||(this.selectedDate=b.target.date,this.dispatchEvent(new CustomEvent('date-tap',{bubbles:!0,composed:!0})))}_preventDefault(b){b.preventDefault()}_getRole(b){return b?'button':'presentational'}_getAriaLabel(b){if(!b)return'';var c=this._getDate(b)+' '+this.i18n.monthNames[b.getMonth()]+' '+b.getFullYear()+', '+this.i18n.weekdays[b.getDay()];return this._isToday(b)&&(c+=', '+this.i18n.today),c}_getAriaDisabled(b,c,f){return void 0===b||void 0===c||void 0===f?void 0:this._dateAllowed(b,c,f)?'false':'true'}}customElements.define(a.is,a),window.Vaadin=window.Vaadin||{},Vaadin.MonthCalendarElement=a}</script></dom-module></body></html>